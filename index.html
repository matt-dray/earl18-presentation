<!DOCTYPE html>
<html>
  <head>
    <title>Crosstalk</title>
    <meta charset="utf-8">
    <meta name="author" content="Matt Dray | Dept for Education | EARL 2018" />
    <link rel="stylesheet" href="style\style.css" type="text/css" />
    <link rel="stylesheet" href="style\style-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Crosstalk
## Shiny-like without Shiny?
### Matt Dray | Dept for Education | EARL 2018

---




class: center, middle

# TL;DR

Crosstalk for small, lightweight, shareable apps

---

class: center, middle

# The ask

visualise school locations to help make a policy decision

--

quickly

--

cheaply

--

shareable

---

class: inverse, center, middle

# Solution 1

[`leaflet`](https://rstudio.github.io/leaflet/) interactive map

---

class: center, middle

.image-100[![](img/solution1-1.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/01_leaflet.html)

---

class: center, middle

.image-100[![](img/solution1-2.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/01_leaflet.html)

---

# Solution 1

.pull-left[

## &amp;check;

interactive

reproducible

simple

shareable

]

--

.pull-right[

## &amp;cross;

separate documentation

separate tabular data

rendered in-browser

]

---
class: inverse, center, middle

# Solution 2

[`leaflet`](https://rstudio.github.io/leaflet/) interactive map

in a [`flexdashboard`](https://rmarkdown.rstudio.com/flexdashboard/)

---

class: center, middle

.image-100[![](img/solution2.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/02_leaflet-flexdash.html)

---

# Solution 2

.pull-left[

## &amp;check;

map + documentation

user-friendly

self-service

]

--

.pull-right[

## &amp;cross;

]

---
class: inverse, center, middle

# Solution 3

[`leaflet`](https://rstudio.github.io/leaflet/) interactive map

in a [`flexdashboard`](https://rmarkdown.rstudio.com/flexdashboard/)

with a [`DT`](https://rstudio.github.io/DT/) interactive table


---

class: center, middle

.image-100[![](img/solution3-1.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/03_leaflet-flexdash-dt.html)

---

class: center, middle

.image-100[![](img/solution3-2.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/03_leaflet-flexdash-dt.html)

---

# Solution 3


.pull-left[

## &amp;check;


map + documentation + tabular

download data

]

--

.pull-right[

## &amp;cross;

data copies

]

---
class: inverse, center, middle

# Solution 4

[`leaflet`](https://rstudio.github.io/leaflet/) interactive map

in a [`flexdashboard`](https://rmarkdown.rstudio.com/flexdashboard/)

with a [`DT`](https://rstudio.github.io/DT/) interactive table

linked with [`crosstalk`](https://rstudio.github.io/crosstalk/)

---

class: center, middle

.image-100[![](img/solution4-1.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/04_leaflet-flexdash-dt-crosstalk.html)

---

class: center, middle

.image-100[![](img/solution4-2.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/04_leaflet-flexdash-dt-crosstalk.html)

---

class: center, middle

.image-100[![](img/solution4-3.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/04_leaflet-flexdash-dt-crosstalk.html)

---

class: center, middle

.image-100[![](img/solution4-4.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/04_leaflet-flexdash-dt-crosstalk.html)

---

class: center, middle

.image-100[![](img/solution4-5.PNG)]

Demo available [here](https://matt-dray.github.io/earl18-crosstalk/04_leaflet-flexdash-dt-crosstalk.html)

---

# Solution 4

.pull-left[

## &amp;check;

one data source

selections affect all widgets

filtering

]

--

.pull-right[

## &amp;cross;

?

]

---

class: inverse, center, middle

# What's Crosstalk?

---

class: center, middle

&gt; static html documents that do not require Shiny or any kind of server support and yet they can have interactivty between widgets 

Make your widgets friends with each other!

---

# A small code change

#### Before


```r
data &lt;- readRDS("data/some_data.RDS")

datatable(data)

leaflet(data) %&gt;%  addTiles() %&gt;% addMarkers()
```

--

#### After


```r
data &lt;- readRDS("data/some_data.RDS")

*shared &lt;- SharedData$new(data)

datatable(shared)

leaflet(shared) %&gt;% addTiles() %&gt;% addMarkers()
```

---

# Limitations

1. Authors must modify HTML widgets

2. Aggregate and summary views not yet available 

3. Crosstalk is not appropriate for large data sets

???

1. There is guidance for the tweak. 
2. Right now only linked brushing and filtering of views that show individual data points, not aggregate or summary views.
3. Depenedent on browser limitations.


---

# Resources

.pull-left[

Talk at [rstudio::conf 2017](https://www.rstudio.com/resources/videos/linking-html-widgets-with-crosstalk/)

[Documentation](https://rstudio.github.io/crosstalk/)

CRAN [package details](https://CRAN.R-project.org/package=crosstalk )

CRAN [reference manual](https://cran.r-project.org/web/packages/crosstalk/crosstalk.pdf)

Repo on [GitHub](https://github.com/rstudio/crosstalk)

]

.pull-right[

![Joe Cheng](https://avatars3.githubusercontent.com/u/129551?s=400&amp;v=4)

]

---
class: center, middle

# TL;DR

Insert TL;DR.

---
class: inverse, center, middle

# Contact

Matt Dray

[matthew.dray@education.gov.uk](mailto:matthew.dray@education.gov.uk)

[rostrum.blog](https://rostrum.blog) | [twitter.com/mattdray](https://www.twitter.com/mattdray) | [github.com/matt-dray](https://www.github.com/matt-dray)
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
